<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>BYOB Profile</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;padding:24px;background:#f7f7f7}
      .card{max-width:520px;margin:0 auto;background:#fff;border:1px solid #eee;border-radius:12px;padding:20px;box-shadow:0 4px 16px rgba(0,0,0,.06)}
      .btn{display:inline-block;background:#0d6d13;color:#fff;padding:12px 16px;border-radius:10px;text-decoration:none;font-weight:700}
      .muted{color:#666;margin-top:10px}
    </style>
  </head>
  <body>
    <div class="card">
      <h2>Open Profile</h2>
      <p id="desc">Launching the BYOB app…</p>
      <p><a id="open" class="btn" href="#">Open in App</a></p>
      <p class="muted">Don’t have the app?
        <a href="https://play.google.com/store/apps/details?id=YOUR_ANDROID_PACKAGE">Get it on Google Play</a> •
        <a href="https://apps.apple.com/app/idYOUR_APPLE_ID">App Store</a>
      </p>
    </div>

    <script>
      const qs = new URLSearchParams(location.search);
      const userId  = qs.get('userId');         // supports your internal id
      const username = qs.get('u');             // or a nicer slug

      // path your app understands (configure Expo Router for these)
      const appPath = username ? `/u/${encodeURIComponent(username)}`
                               : `/profile/${encodeURIComponent(userId)}`;

      // If you later set up Universal/App Links, switch to your real https domain.
      const universal = `https://byob.app${appPath}`; // TODO: change when you have a domain
      const scheme    = `byob://${appPath}`;          // works today without a domain

      // Try opening via https first, then fall back to custom scheme
      document.getElementById('open').href = universal;
      setTimeout(() => { location.href = universal; }, 200);
      setTimeout(() => { location.href = scheme;    }, 1200);
    </script>
  </body>
</html>
